/*
  Affichage d'images noir et blanc sur un minitel
  Quimper, 27 juin 2017 / arduino 1.8.2 @ urzhiata
  Révisé le 15 fev 2022 pierre@lesporteslogiques.net
  arduino 1.8.5 @ kirin / Debian 9.5 Stretch

  Minitel library for Arduino (version ?) https://github.com/imclab/Minitel

  Flash Library 1.0.1 by Mikel Hart https://github.com/schinken/Flash
    (pour faciliter les accès à la mémoire PROGMEM)

  Le croquis utilise 11124/30720 octets (36%) de l'espace de stockage de programmes. .
  Les variables globales utilisent 782/2048 octets (38%) de mémoire dynamique.

*/

#include <Flash.h>
#include <SoftwareSerial.h>
#include <Minitel.h>

Minitel m;

// palmier, blanc sur fond noir
FLASH_ARRAY(byte, c, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 35, 43, 108, 112, 32, 32, 32, 104, 127, 127, 36, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 35, 47, 111, 125, 48, 96, 127, 63, 97, 126, 117, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 35, 109, 127, 127, 126, 63, 120, 127, 127, 111, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 112, 112, 112, 112, 112, 112, 112, 114, 127, 127, 127, 125, 127, 127, 127, 50, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 44, 35, 35, 43, 47, 35, 35, 127, 127, 127, 127, 127, 127, 127, 119, 115, 115, 43, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 120, 126, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 119, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 96, 127, 127, 127, 127, 127, 37, 122, 127, 127, 127, 127, 127, 127, 127, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 127, 39, 127, 103, 55, 96, 126, 47, 127, 127, 127, 127, 127, 127, 127, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 55, 32, 122, 37, 42, 32, 39, 32, 32, 127, 127, 32, 127, 37, 32, 107, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 53, 32, 32, 32, 32, 32, 106, 127, 127, 32, 107, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 127, 127, 32, 104, 126, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 63, 63, 116, 32, 53, 48, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 117, 109, 34, 32, 108, 125, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 43, 34, 32, 32, 106, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 34, 97, 52, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 127, 125, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 42, 47, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 124, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 42, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 104, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 111, 124, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 112, 124, 124, 124, 124, 124, 127, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 112, 124, 124, 127, 127, 127, 127, 127, 127, 127, 127, 127, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 124, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127
           );

// i love innovation, blanc sur fond noir
FLASH_ARRAY(byte, d, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 112, 112, 112, 112, 112, 32, 32, 32, 32, 112, 112, 32, 32, 32, 96, 112, 48, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 43, 127, 127, 127, 35, 32, 32, 96, 126, 127,
            127, 127, 52, 120, 127, 127, 127, 117, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 127, 127, 127, 32, 32, 32, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 52, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 127, 127, 127, 32, 32, 32, 43, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 33, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 127, 127, 127, 32, 32, 32, 32, 34, 111, 127, 127, 127, 127, 127, 127, 39, 33, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 112, 127, 127, 127, 116, 32, 32, 32, 32, 32, 34, 43, 127, 127, 39, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 35, 35, 35, 35, 35, 32, 32, 32, 32, 32,
            32, 32, 34, 33, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 96, 112, 96, 112, 32, 96, 48, 112, 48, 96, 112, 32, 112, 112, 96, 112, 32, 32, 112, 96, 32, 96, 112, 112, 112, 96, 48, 32, 112, 112, 48, 96, 112, 32, 96, 112, 32, 32, 32,
            32, 32, 55, 32, 63, 125, 48, 53, 106, 125, 48, 53, 126, 33, 34, 125, 107, 53, 106, 33, 62, 109, 34, 34, 127, 34, 104, 55, 126, 39, 34, 111, 52, 63, 125, 48, 53, 32, 32, 32, 32, 32, 117, 32, 53, 34, 111, 53, 106, 34, 111, 53, 111, 48, 96, 63, 34, 127, 55, 122, 45, 110, 117, 32, 127, 32, 122, 117, 111, 116, 96, 126, 37, 53, 43, 125, 53, 32, 32, 32, 32, 34, 35, 34, 35, 32, 32, 33, 35, 32, 32, 33, 32, 35, 35, 32, 32, 34, 32, 33,
            32, 32, 35, 34, 35, 33, 35, 35, 32, 35, 35, 33, 34, 35, 32, 34, 35, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32);

// pouce "like" blanc sur fond noir
FLASH_ARRAY(byte, f, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 112, 48, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 32, 43, 48, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 53, 32, 32, 53, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 96, 38, 32, 32, 104, 33, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 56,
            33, 32, 32, 104, 33, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 58, 32, 32, 32, 32, 34, 44, 44, 44, 112, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 96, 60, 44, 44, 44, 108, 48, 32, 58, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 105, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 32, 32, 32, 32, 32, 55, 35, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 58, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 32, 32, 32, 32, 32, 53, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 32, 32, 32, 32, 32, 53, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 40, 49, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 32, 32, 32, 32, 32, 53, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 96, 37, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 106, 32, 32, 32, 110, 36, 117, 112, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 105, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
            32, 32, 32, 32, 32, 32, 32, 32, 32, 34, 45, 44, 44, 44, 46, 33, 32, 41, 44, 112, 112, 112, 112, 112, 112, 56, 44, 33, 32, 32, 32, 32, 32);

int mode = 0;

void setup() {
}

void loop() {

  if (mode == 0) {
    ecranTitre();
    delay(12000);
  }

  if (mode == 1) {
    m.graphicMode();
    m.clearScreen();
    m.textColor(WHITE);
    m.bgColor(BLACK);
    m.noPixelate();
    for (int i = 0; i < f.count(); i++) {
      m.textByte(f[i]);
    }
    m.textMode();
    m.noCursor();
    m.textColor(WHITE);
    m.bgColor(BLACK);
    m.charSize(SIZE_NORMAL);
    m.textColor(BLACK);
    m.bgColor(WHITE);
    m.blink();
    m.text("                                        ",    1, 21);
    m.text("    https://lesporteslogiques.net       ",    1, 22);
    m.text("      xor@lesporteslogiques.net         ",    1, 23);
    m.text("                                        ",    1, 24);
    m.noBlink();
    delay(8000);
  }

  if (mode == 2) {
    m.graphicMode();
    m.clearScreen();
    m.textColor(BLACK);
    m.bgColor(WHITE);
    m.noPixelate();
    for (int i = 0; i < d.count(); i++) {
      m.textByte(d[i]);
    }
    delay(5000);
  }

  mode ++;
  if (mode > 2) mode = 0;
}

void ecranTitre() {
  m.graphicMode();
  m.clearScreen();
  m.textColor(WHITE);
  m.bgColor(BLACK);
  m.pixelate();
  for (int i = 0; i < c.count(); i++) {
    m.textByte(c[i]);
  }
  m.noPixelate();

  m.textMode();
  m.textColor(WHITE);
  m.bgColor(BLACK);
  m.charSize(SIZE_DOUBLE);
  m.textChar('L', 1, 3);
  m.textChar('E', 3, 3);
  m.textChar('S', 5, 3);
  m.textChar('P', 1, 5);
  m.textChar('O', 3, 5);
  m.textChar('R', 5, 5);
  m.textChar('T', 7, 5);
  m.textChar('E', 9, 5);
  m.textChar('S', 11, 5);
  m.textChar('L', 1, 7);
  m.textChar('O', 3, 7);
  m.textChar('G', 5, 7);
  m.textChar('I', 7, 7);
  m.textChar('Q', 9, 7);
  m.textChar('U', 11, 7);
  m.textChar('E', 13, 7);
  m.textChar('S', 15, 7);

  m.charSize(SIZE_NORMAL);
  m.text("Culture",    4, 11);
  m.text("Numérique",  4, 13);
  m.text("Ludique",    4, 15);
  m.text("Créative",   4, 17);

  m.bgColor(WHITE);
  m.textColor(BLACK);
  m.text("                                        ",    1, 21);
  m.text("    https://lesporteslogiques.net       ",    1, 22);
  m.text("      xor@lesporteslogiques.net         ",    1, 23);
  m.text("                                        ",    1, 24);
}

